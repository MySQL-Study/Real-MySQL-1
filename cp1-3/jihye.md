## CHAPTER 1 소개
### 1.1 MySQL 소개
- 1979년 스웨덴의 TcX라는 회사의 터이널 인터페이스 라이브러리인 UNIREG로부터 시작
- 라이선스 정책
  - MySQL 엔터프라이즈 에디션
  - MySQL 커뮤니티 에디션
- 2011년 2월 MySQL 5.5 GA 버전부터는 엔터프라이즈 에디션의 소스코드가 더는 공개되지 않도록 변경
- 5.5버전부터 5.7 버전까지는 안정성과 성능 개선에 집중
- 8.0 버전부터는 상용 DBMS가 가지고 있는 기능들이 장착

### 1.2 왜 MySQL인가?
- 안정성
- 성능과 기능
- 커뮤니티나 인지도

## CHAPTER 2 설치와 설정
### 2.1 MySQL 서버 설치
- 기존 버전에서 새로운 메이저 버전으로 업그레이드 하는 경우에는 최소 패치 버전이 15 ~ 20번 이상 릴리스된 버전을 선택하는 것이 안정적인 서비스에 도움이 됨
  - 메이저 버전은 많은 변화를 거친 버전이므로 갓 출시된 상태에서는 치명적이거나 보완하는 데 많은 시간이 걸릴 만한 버그 발생 가능
- Percona에서 출시하는 Percona Server 백업 및 모니터링 도구 또는 플러그인을 활용하면 MySQL 커뮤니티 에디션의 부족한 부분을 메꿀 수 있다.

### 2.2 MySQL 서버의 시작과 종료
- MySQL 서버에서는 실제 트랜잭션이 정상적으로 커밋돼도 데이터 파일에 변경된 내용이 기록되지 않고 로그 파일(리두 로그)에만 기록돼 있을 수 있다.
- 클린 셧다운
  - 모든 커밋된 데이터를 데이터 파일에 적용하고 종료하는 것
  - MySQL 서버가 다시 기동할 때 별도의 트랜잭션 복구 과정을 진행하지 않기 때문에 빠르게 시작 가능
  - MySQL 서버에 접속할 때 호스트를 localhost로 명시하는 것과 127.0.0.1로 명시하는 것이 각각 의미가 다르다.
    - localhost
      - 소켓 파일을 통해 MySQL 서버에 접속
      - Unix domain socket 방식: 유닉스의 프로세스 간 통신(IPC: Inter Process Commnunication의 일종)
    - 127.0.0.1
      - TCP/IP 방식
      - 자기 서버를 가리키는 루프백 IP

### 2.3 MySQL 서버 업그레이드
- 인플레이스 업그레이드
  - MySQL 서버의 데이터 파일을 그대로 두고 업그레이드
  - 업그레이드 시간 크게 단축
  - 여러 가지 제약 사항
    - 동일 메이저 버전에서 마이너 버전 간 업그레이드는 대부분 데이터 파일의 변경 없이 진행
    - 여러 버전을 건너뛰어서 업그레이드도 허용
    - 메이저 버전 간 업그레이드는 대부분 크고 작은 데이터 파일의 변경이 필요하기 때문에 반드시 직전 버전에서만 업그레이드 허용
    - 두 단계 이상을 한 번에 업그레이드해야 한다면 mysqldump 프로그램으로 MySQL 서버에서 데이터를 백업받은 후 새로 구축된 서버에 데이터를 적재하는 논리적 업그레이드가 더 나은 방법일 수 있다.
    - 서버의 안정성이 확인된 GA 버전은 지나서 15 ~ 20번 이상의 마이너 버전을 선택하는 것이 좋다.
- 논리적 업그레이드
  - mysqldump 도구 등을 이용해 MySQL 서버의 데이터를 SQL 문장이나 텍스트 파일로 덤프한 후 새로 업그레이드된 버전의 MySQL 서버에서 덤프된 데이터를 적재하는 방법
  - 버전 간 제약 사항이 거의 없음
  - 업그레이드 시간 매우 많이 소요 가능
- MySQL 8.0 업그레이드 시 고려 사항
  - 사용자 인증 방식 변경
    - 기본 인증 방식이 Native Authentication 인증 방식 -> Caching SHA-2 Authentication 인증 방식로 변경
  - MySQL 8.0과의 호환성 체크
  - 외래키 이름의 길이
    - 외래키의 이름이 64글자로 제한
  - 인덱스 힌트
  - GROUP BY에 사용된 정렬 옵션
  - 파티션을 위한 공용 테이블스페이스
    - 파티션의 각 테이블스페이스를 공용 테이블스페이스에 저장 불가능

### 2.4 서버 설정
- 유닉스 계열
  - my.cnf
- 윈도우 계열
  - my.ini
- SET PERSIST
  - SET PERSIST 명령으로 시스템 변수를 변경하면 MySQL 서버는 변경된 값을 즉시 적용함과 동시에 별도의 설정 파일(mysqld-auto.cnf)에 변경 내용을 추가로 기록해 둔다.
  - MySQL 서버가 다시 시작될 떄 기본 설정 파일 뿐만 아니라 자동 생성된 mysqld-auto.cnf 파일을 같이 참조해서 시스템 변수를 적용
  - 현재 실행 중인 MySQL 서버에는 변경 내용을 적용하지 않고 다음 재시작을 위해 mysqld-auto.cnf 파일에만 변경 내용을 기록해두고자 한다면 SET PERSIST_ONLY 명령 사용

## CHAPTER 3 사용자 및 권한
### 3.1 사용자 식별
- 사용자의 계정뿐 아니라 사용자의 접속 지점도 계정의 일부가 된다.
- 권한이나 계정 정보에 대해 MySQL은 범위가 가장 작은 것을 항상 먼저 선택
- % 문자는 모든 IP 또는 모든 호스트명을 의미

### 3.2 사용자 계정 관리
- 시스템 계정은 시스템 계정과 일반 계정을 관리할 수 있지만 일반 계정은 시스템 계정을 관리할 수 없다.
```
CREATE USER 'user'@'%'
IDENTIFIED WITH 'mysql_native_password' BY 'password'
REQUIRE NONE
PASSWPRD EXPIRE INTERVAL 30 DAY
ACCOUNT UNLOCK
PASSWORD HISTORY DEFAULT
PASSWORD REUSE INTERVAL DEFAULT
PASSWORD REQUIRE CURRENT DEFAULT;
```
- IDENTIFIED WITH
  - 사용자의 인증 방식과 비밀번호 설정
- REQUIRE
  - MySQL 서버에 접속할 때 암호화된 SSL/TLS 채널을 사용할 지 여부 설정

### 3.3 비밀번호 관리
- MySQL 서버의 이중 비밀번호 기능은 하나의 계쩡에 대해 2개의 비밀번호를 동시에 설정 가능
- 최근에 설정된 비밀번호는 프라이머리 비밀번호, 이전 비밀번호는 세컨더리 비밀번호

### 3.4 권한

### 3.5 역할
- MySQL 8.0 버전부터 권한을 묶어서 역할을 사용할 수 있게 됨
- SET ROLE 명령을 실행해 해당 역할을 활성화해야 한다.
- activate_all_roles_on_login 시스템 변수가 ON으로 설정되면 매번 역할을 활서오하하지 않아도 로그인과 동시에 부여된 역할이 자동으로 활성화됨
